{% extends 'base.html.twig' %}

{% block title %}Items de votre guilde{% endblock %}

{% block body %}
<form method="get" action="{{ path('app_items_search') }}" class="mb-3">
    <div class="input-group">
        <input type="text" name="q" class="form-control" placeholder="Rechercher un item..." value="{{ app.request.get('q') }}">
        <button class="btn btn-primary" type="submit">Rechercher</button>
    </div>
</form>
{% if guildItems is not empty %}
    <h2>Items déjà ajoutés</h2>
    <ul class="list-group">
      {% for gi in guildItems %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          {{ gi.item.nom }} — {{ gi.price }} €
          <span class="badge badge-secondary">{{ gi.id }}</span>
          <form method="post" action="{{ path('app_guild_items_delete', {'id': gi.id}) }}" style="display:inline;" onsubmit="return confirm('Supprimer cet item ?');">
            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ gi.id) }}">
            <button class="btn btn-danger btn-sm">Supprimer</button>
          </form>
        </li>
      {% endfor %}
    </ul>
{% else %}
    <p>Aucun item n'est présent.</p>
{% endif %}
{% endblock %}